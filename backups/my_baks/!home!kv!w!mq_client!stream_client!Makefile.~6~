
COMPILER_C = gcc
COMPILER_CPP = g++
COMPILE_FLAGS = -Wall
LINKER_FLAGS = -Lrabbitmq -lrabbitmq
GENERAL_FLAGS = -time

ECHO = /bin/echo

utils.o: utils.c utils.h
	@${ECHO} "Compiling utils.o"
	${COMPILER_C} ${COMPILE_FLAGS} utils.c

rabbitmq_client.o: rabbitmq_client.c
	@${ECHO} "Compiling rabbitmq_client.o"
	${COMPILER_C} ${COMPILE_FLAGS} rabbitmq_client.c


rabbitmq_client_release: rabbitmq_client.o utils.o
	@${ECHO} "Compiling rabbitmq_client for release"
	${COMPILER_C} ${LINKER_FLAGS} rabbitmq_client.o utils.o -o rabbitmq_client

rabbitmq_client_debug: rabbitmq_client.o utils.o
	@${ECHO} "Compiling all for debugging"
	${COMPILER_C} ${LINKER_FLAGS} -ggdb rabbitmq_client.o utils.o -o rabbitmq_client

clean_all:
	@${ECHO} "Cleaning"
	rm -rf *.o

shared_memory_controller_debug: shared_memory_controller.cpp
	@${ECHO} "Compiling shared_memory_controller for debug"
	${COMPILER_CPP} ${GENERAL_FLAGS} ${COMPILE_FLAGS} -g -DNDEBUG shared_memory_controller.cpp \
	 -o shared_memory_controller -lboost_filesystem
	@chmod u+x shared_memory_controller
	@ls -l shared_memory_controller

opencl_boost_client_debug: opencl_boost_client.cpp
	@${ECHO} "Compiling opencl_boost_client.cpp for debug"
	${COMPILER_CPP} ${GENERAL_FLAGS} ${COMPILE_FLAGS} -g -DNDEBUG opencl_boost_client.cpp \
	 -o opencl_boost_client -lboost_filesystem
	@chmod u+x opencl_boost_client
	@ls -l opencl_boost_client

message_list.o: message_list.cpp message_list.hpp
	@${ECHO} "Compiling message_list.cpp for debug"
	${COMPILER_CPP} ${GENERAL_FLAGS} ${COMPILE_FLAGS} -g -DNDEBUG message_list.cpp \
	 -o message_list.o -lboost_filesystem
	@ls -l message_list.o

#g++ -ggdb -DNDEBUG -c -O2 -Wall  /home/kv/w/mq_client/stream_client/shared_memory_controller.cpp -o cbw
#g++ -ggdb  -c -O2 -Wall  /home/kv/w/mq_client/stream_client/ -o cbw